bundle:
  name: dnks-dab-demo

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://e2-demo-field-eng.cloud.databricks.com

artifacts:
  default:
    type: whl
    build: poetry build
    path: .

include:
  - ./resources/*.yaml

resources:
  jobs:
    dnks_dab_demo_sample_job:
      name: dnks_dab_demo_sample_job
      tasks:
        - task_key: dnks_dab_demo_sample_task
          job_cluster_key: dnks_dab_demo_cluster
          spark_python_task:
            python_file: ./notebooks/job.py
          libraries:
            - whl: ./dist/*.whl

      job_clusters:
        - job_cluster_key: dnks_dab_demo_cluster
          new_cluster:
            node_type_id: i3.xlarge
            num_workers: 0
            spark_version: 16.0.x-scala2.12
            spark_conf:
              "spark.databricks.cluster.profile": "singleNode"
              "spark.master": "local[*, 4]"
            custom_tags:
              "ResourceClass": "SingleNode"
